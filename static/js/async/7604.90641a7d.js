"use strict";(self.webpackChunkFrostWood=self.webpackChunkFrostWood||[]).push([["7604"],{3525:function(e,n,r){r.r(n),r.d(n,{default:function(){return s}});var o=r(5893),t=r(65);function c(e){let n=Object.assign({h1:"h1",a:"a",h2:"h2",p:"p",pre:"pre",code:"code"},(0,t.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.h1,{id:"对象操作",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#对象操作",children:"#"}),"对象操作"]}),"\n",(0,o.jsxs)(n.h2,{id:"原生js-structuredclone",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#原生js-structuredclone",children:"#"}),"原生js structuredClone"]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/structuredClone",rel:"noopener noreferrer",target:"_blank",children:"MDN"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",meta:"",children:"const cloned = structuredClone(obj);\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"uview-ui-深度克隆",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#uview-ui-深度克隆",children:"#"}),"uview-ui 深度克隆"]}),"\n",(0,o.jsxs)(n.p,{children:["以下代码来自 uview-ui 2.0 组件库源码，",(0,o.jsx)(n.a,{href:"https://github.com/umicro/uView2.0/blob/master/uni_modules/uview-ui/libs/function/index.js",rel:"noopener noreferrer",target:"_blank",children:"原始代码"}),"。"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",meta:"",children:"/**\n * @description 深度克隆\n * @param {object} obj 需要深度克隆的对象\n * @param cache 缓存\n * @returns {*} 克隆后的对象或者原值（不是对象）\n */\nfunction deepClone(obj, cache = new WeakMap()) {\n	if (obj === null || typeof obj !== 'object') return obj;\n	if (cache.has(obj)) return cache.get(obj);\n	let clone;\n	if (obj instanceof Date) {\n		clone = new Date(obj.getTime());\n	} else if (obj instanceof RegExp) {\n		clone = new RegExp(obj);\n	} else if (obj instanceof Map) {\n		clone = new Map(Array.from(obj, ([key, value]) => [key, deepClone(value, cache)]));\n	} else if (obj instanceof Set) {\n		clone = new Set(Array.from(obj, value => deepClone(value, cache)));\n	} else if (Array.isArray(obj)) {\n		clone = obj.map(value => deepClone(value, cache));\n	} else if (Object.prototype.toString.call(obj) === '[object Object]') {\n		clone = Object.create(Object.getPrototypeOf(obj));\n		cache.set(obj, clone);\n		for (const [key, value] of Object.entries(obj)) {\n			clone[key] = deepClone(value, cache);\n		}\n	} else {\n		clone = Object.assign({}, obj);\n	}\n	cache.set(obj, clone);\n	return clone;\n}\n"})}),"\n",(0,o.jsxs)(n.h2,{id:"uview-ui-对象深度合并",children:[(0,o.jsx)(n.a,{className:"header-anchor","aria-hidden":"true",href:"#uview-ui-对象深度合并",children:"#"}),"uview-ui 对象深度合并"]}),"\n",(0,o.jsxs)(n.p,{children:["以下代码来自 uview-ui 2.0 组件库源码，",(0,o.jsx)(n.a,{href:"https://github.com/umicro/uView2.0/blob/master/uni_modules/uview-ui/libs/function/index.js",rel:"noopener noreferrer",target:"_blank",children:"原始代码"}),"。"]}),"\n",(0,o.jsx)(n.p,{children:"深度合并需要搭配深度克隆使用。"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",meta:"",children:"/**\n * @description JS对象深度合并\n * @param {object} target 需要拷贝的对象\n * @param {object} source 拷贝的来源对象\n * @returns {object|boolean} 深度合并后的对象或者false（入参有不是对象）\n */\nfunction deepMerge(target = {}, source = {}) {\n	target = deepClone(target)\n	if (typeof target !== 'object' || target === null || typeof source !== 'object' || source === null) return target;\n	const merged = Array.isArray(target) ? target.slice() : Object.assign({}, target);\n	for (const prop in source) {\n		if (!source.hasOwnProperty(prop)) continue;\n		const sourceValue = source[prop];\n		const targetValue = merged[prop];\n		if (sourceValue instanceof Date) {\n			merged[prop] = new Date(sourceValue);\n		} else if (sourceValue instanceof RegExp) {\n			merged[prop] = new RegExp(sourceValue);\n		} else if (sourceValue instanceof Map) {\n			merged[prop] = new Map(sourceValue);\n		} else if (sourceValue instanceof Set) {\n			merged[prop] = new Set(sourceValue);\n		} else if (typeof sourceValue === 'object' && sourceValue !== null) {\n			merged[prop] = deepMerge(targetValue, sourceValue);\n		} else {\n			merged[prop] = sourceValue;\n		}\n	}\n	return merged;\n}\n"})})]})}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}=Object.assign({},(0,t.ah)(),e.components);return n?(0,o.jsx)(n,Object.assign({},e,{children:(0,o.jsx)(c,e)})):c(e)}let s=a;a.__RSPRESS_PAGE_META={},a.__RSPRESS_PAGE_META["front-end%2Fcode-snippet%2F%E5%AF%B9%E8%B1%A1%E6%93%8D%E4%BD%9C.mdx"]={toc:[{id:"原生js-structuredclone",text:"原生js structuredClone",depth:2},{id:"uview-ui-深度克隆",text:"uview-ui 深度克隆",depth:2},{id:"uview-ui-对象深度合并",text:"uview-ui 对象深度合并",depth:2}],title:"对象操作",frontmatter:{}}}}]);